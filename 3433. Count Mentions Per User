3433. Count Mentions Per User
Link - https://leetcode.com/problems/count-mentions-per-user/description/?envType=daily-question&envId=2025-12-12
Difficulty - Medium

Solution -> O(E log E + E Ã— U)
class Solution {
    public int[] countMentions(int numberOfUsers, List<List<String>> events) {
        int[] mentions = new int[numberOfUsers];
        int[] onlineTime = new int[numberOfUsers]; 

        events.sort((a, b) -> {
            int timeA = Integer.parseInt(a.get(1));
            int timeB = Integer.parseInt(b.get(1));
            
            if (timeA != timeB) {
                return Integer.compare(timeA, timeB);
            }
            if (a.get(0).equals("OFFLINE")) return -1;
            if (b.get(0).equals("OFFLINE")) return 1;
            return 0;
        });

        for (List<String> event : events) {
            String type = event.get(0);
            int time = Integer.parseInt(event.get(1));
            String data = event.get(2);

            if (type.equals("OFFLINE")) {
                int userId = Integer.parseInt(data);
                onlineTime[userId] = time + 60;
            } 
            else if (type.equals("MESSAGE")) {
                String[] tokens = data.split(" ");
                
                for (String token : tokens) {
                    if (token.equals("ALL")) {
                        for (int i = 0; i < numberOfUsers; i++) {
                            mentions[i]++;
                        }
                    } 
                    else if (token.equals("HERE")) {
                        for (int i = 0; i < numberOfUsers; i++) {
                            if (onlineTime[i] <= time) {
                                mentions[i]++;
                            }
                        }
                    } 
                    else if (token.startsWith("id")) {
                        int userId = Integer.parseInt(token.substring(2));
                        mentions[userId]++;
                    }
                }
            }
        }
        return mentions;
    }
}
